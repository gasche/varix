gen Rule, :cmo => :ml do |t|
  sys "ocamlc -c #{t.source}"
end

gen Rule, :cma => :cmo do |t|
  sys "ocamlc -a #{t.source} -o #{t.name}"
end

file 'dawgutils' => %w(bag.cma) do
  sys "ocamlc unix.cma bigarray.cma bag.cma dawgutils.ml -o dawgutils"
end

desc "run dawgutils"
task :run => :dawgutils do
  sys "./dawgutils"
end


desc "Remove autogenerated files."
task :clean do
  sys "rm -f *.cm?"
end
